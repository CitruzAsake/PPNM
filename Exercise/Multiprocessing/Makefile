CFLAGS = -Wall -O1 -std=gnu11
CFLAGS += -pthread
CFLAGS += -fopenmp
LDLIBS = -lm #-lgomp

default: out.txt multiproplot.pdf
	@echo 
	@cat out.txt
	@echo

out.txt: main
	time ./$< >$@

multiproplot.pdf: multiproplot.ppl
	pyxplot $< 1> /dev/null

multiproplot.ppl: datafile.txt circledatafile.txt Makefile
	@echo 'set terminal pdf dpi 800'						>  $@
	@echo 'set output "multiproplot.pdf"'						>> $@
	@echo 'set key outside' 								>> $@
	@echo 'set grid'											>> $@
	@echo 'set xlabel "$$x$$"'								>> $@
	@echo 'set ylabel "$$y$$"'								>> $@
	@echo 'set xrange [0:1]'								>> $@
	@echo 'set yrange [0:1]'								>> $@
	@echo 'set title "Monte Carlo Method plot "'	>> $@
	@echo 'plot \\'						>> $@
	@echo '"circledatafile.txt" using 1:2 w l lt 10 lw 4 color blue  title "circular data values $$r=1$$" 			\\'>> $@
	@echo ',"datafile.txt" using 1:2 w p pt 31 lw 4 color cyan  title "Values generated by random" 			\\'>> $@

.PHONEY: clean

clean:
	$(RM) main *.txt *.png *.pdf
